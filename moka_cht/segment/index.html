<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Segmented lock-free hash tables."><meta name="keywords" content="rust, rustlang, rust-lang, segment"><title>moka_cht::segment - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../moka_cht/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><h2 class="location">Module segment</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#modules">Modules</a></li></ul></div><div id="sidebar-vars" data-name="segment" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">moka_cht</a>::<wbr><a class="mod" href="#">segment</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/moka_cht/segment.rs.html#1-34" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Segmented lock-free hash tables.</p>
<p>Segmented hash tables divide their entries between a number of smaller
logical hash tables, or segments. Each segment is entirely independent from
the others, and entries are never relocated across segment boundaries.</p>
<p>In the context of this crate, a segment refers specifically to an array of
bucket pointers. The number of segments in a hash table is rounded up to the
nearest power of two; this is so that selecting the segment for a key is no
more than a right shift to select the most significant bits of a hashed key.</p>
<p>Each segment is entirely independent from the others, all operations can be
performed concurrently by multiple threads. Should a set of threads be
operating on disjoint sets of segments, the only synchronization between
them will be destructive interference as they access and update the bucket
array pointer and length for each segment.</p>
<p>Compared to the unsegmented hash tables in this crate, the segmented hash
tables have higher concurrent write throughput for disjoint sets of keys.
However, the segmented hash tables have slightly lower read and
single-threaded write throughput. This is because the segmenting structure
adds another layer of indirection between the hash table and its buckets.</p>
<p>The idea for segmenting hash tables was inspired by the
<a href="https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/util/concurrent/ConcurrentHashMap.java"><code>ConcurrentHashMap</code></a> from OpenJDK 7, which consists of a number of
separately-locked segments. OpenJDK 8 introduced a striped concurrent hash
map that stripes a set of bucket locks across the set of buckets using the
least significant bits of hashed keys.</p>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left import-item"><code>pub use map::<a class="struct" href="map/struct.HashMap.html" title="struct moka_cht::segment::map::HashMap">HashMap</a>;</code></div><div class="item-right docblock-short"></div></div></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="map/index.html" title="moka_cht::segment::map mod">map</a></div><div class="item-right docblock-short"><p>A lock-free hash map implemented with segmented bucket pointer arrays, open
addressing, and linear probing.</p>
</div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="moka_cht" data-search-index-js="../../search-index.js" data-search-js="../../search.js"></div>
</body></html>